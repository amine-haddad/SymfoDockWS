{% extends 'base.html.twig' %}

{% block title %}
    Category: {{ category.name }}
{% endblock %}

{% block body %}
    <div class="container">
        <!-- Display the name of the current category -->
        <h3 class="mt-3">
            Category: {{ category.name }}
        </h3>

        <!-- List of programs under the current category -->
        <div class="program-list mt-4">
            <h2>Programs</h2>
            <div class="d-flex flex-row flex-nowrap overflow-auto">
                {% for program in programs %}
                    <div class="card mx-2" style="min-width: 200px; max-width: 300px;">
                        <div class="card-inner">
                            <!-- Front face of the card -->
                            <div class="card-front">
                                <a href="{{ path('program_show', { 'slug': program.slug }) }}">
                                    <img src="{{ vich_uploader_asset(program, 'posterFile') | imagine_filter('poster_thumbnail') }}" class="card-img-top img-fluid rounded" alt="{{ program.title }}">
                                </a>
                            </div>
                            <!-- Back face of the card -->
                            <div class="card-back">
                                <h5 class="card-title">{{ program.title }}</h5>
                                <p class="card-text">{{ program.synopsis }}</p>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <div>
                        <p>No programs found for category: {{ category.name }}.</p>
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Navigation buttons for previous, all categories, and next categories -->
        <div class="btn-group mt-3" role="group">
            <!-- Link to the previous category -->
            {% if previousCategory %}
                <a href="{{ path('category_show', { slug: previousCategory.slug }) }}" class="btn btn-secondary">Previous</a>
            {% else %}
                <button class="btn btn-secondary" disabled>Previous</button>
            {% endif %}

            <!-- Link to all categories -->
            <a href="{{ path('category_index') }}" class="btn btn-secondary">All Categories</a>

            <!-- Link to the next category -->
            {% if nextCategory %}
                <a href="{{ path('category_show', { slug: nextCategory.slug }) }}" class="btn btn-secondary">Next</a>
            {% else %}
                <button class="btn btn-secondary" disabled>Next</button>
            {% endif %}
        </div>

        <!-- Link to all categories -->
        <a href="{{ path('category_index') }}" class="btn btn-secondary mt-3">Back to Categories</a>
    </div>
{% endblock %}
